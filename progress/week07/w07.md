# Tuần 7 — Retrain Model: Pre-Release Prediction

## Mục tiêu
Xây dựng model dự đoán thành công phim **TRƯỚC khi phim ra mắt** - chỉ sử dụng features biết trước, loại bỏ data leakage.

## Data Source
- **File:** `data/clean_movies_features.csv` (đã Feature Engineering sẵn, 1021 phim, 65 features)

## Việc cần làm

### 1. Chọn Pre-Release Features (chỉ features biết trước)

**Sử dụng:**
- `budget`, `runtime`, `runtime_group`
- `release_year`, `release_month`, `release_weekday`, `release_quarter`, `is_holiday_season`
- `num_genres`, `main_genre`
- `genre_Action`, `genre_Adventure`, `genre_Comedy`, `genre_Drama`, `genre_Thriller`, ...
- `is_usa`, `is_vietnam`, `is_uk`, `is_china`, `is_france`, ...
- `num_main_cast`

**Loại bỏ (data leakage):**
- ❌ `revenue`, `Revenue_log`
- ❌ `vote_average`, `vote_count`  
- ❌ `roi`, `roi_clipped`, `roi_vs_vote`, `budget_per_year`

### 2. Train Model

- [ ] Load `clean_movies_features.csv`
- [ ] Chọn Pre-Release features + label `success`
- [ ] Split: 80% train / 20% test
- [ ] Train Random Forest Classifier
- [ ] Evaluate: Accuracy, Precision, Recall, F1
- [ ] 5-Fold Cross Validation
- [ ] Feature Importance analysis
- [ ] Lưu model: `data/pkl/pre_release_rf_model.pkl`

## Giao nộp
- Script `retrain.py`
- Model file `pre_release_rf_model.pkl`
- Báo cáo metrics (kỳ vọng: **Accuracy 70-80%**)

## Giải thích
> Accuracy thấp hơn model cũ (99%) là **bình thường** và **đúng logic**:
> - Model cũ dùng `vote_average` + `revenue` → data leakage
> - Model mới chỉ dùng thông tin biết trước → dự đoán THỰC SỰ

